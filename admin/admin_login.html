<!DOCTYPE html>
<html>
<head>
    <title>Admin Login</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/seed.js"></script>
    <script src="../js/storage.js"></script>
</head>
<body>
<div class="header"><h2>Admin Login</h2></div>
<div class="container">
    <div class="card">
        <input class="input-box" id="username" placeholder="Admin Username">
        <input class="input-box" id="password" placeholder="Password" type="password">
        <button class="btn" onclick="login()">Login</button>
        <a href="../index.html"><div style="margin-top:12px;color:#555;">Back to Role Selection</div></a>
    </div>
</div>

<script>
function login() {
    const users = getData("admins");
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    const found = users.find(x => x.username === u && x.password === p);
    if (!found) {
        alert("Invalid credentials");
        return;
    }
    localStorage.setItem("activeAdmin", JSON.stringify(found));
    // clear other roles
    localStorage.removeItem("activeWorker");
    localStorage.removeItem("activeVillager");
    window.location.href = "admin_dashboard.html";
}
</script>
</body>
</html>
