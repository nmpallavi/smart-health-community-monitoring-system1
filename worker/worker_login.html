<!DOCTYPE html>
<html>
<head>
    <title>Worker Login</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/seed.js"></script>
    <script src="../js/storage.js"></script>
</head>
<body>
<div class="header"><h2>Health Worker Login</h2></div>
<div class="container">
    <div class="card">
        <input class="input-box" id="username" placeholder="Username">
        <input class="input-box" id="password" placeholder="Password" type="password">
        <button class="btn" onclick="login()">Login</button>
        <a href="../index.html"><div style="margin-top:12px;color:#555;">Back to Role Selection</div></a>
    </div>
</div>

<script>
function login() {
    const users = getData("workers");
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    const found = users.find(x => x.username === u && x.password === p);
    if (!found) {
        alert("Invalid credentials");
        return;
    }
    // set active worker
    localStorage.setItem("activeWorker", JSON.stringify(found));
    // clear any active admin or villager to avoid role leakage
    localStorage.removeItem("activeAdmin");
    localStorage.removeItem("activeVillager");
    window.location.href = "worker_dashboard.html";
}
</script>
</body>
</html>
